<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Viewport optimized for mobile-first responsive design -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  
  <!-- SEO & Social Meta -->
  <meta name="description" content="Professional Chinese language tutoring platform. Practice Mandarin with interactive quizzes, flashcards, and personalized progress tracking.">
  <meta name="keywords" content="Chinese learning, Mandarin practice, language tutoring, pinyin, HSK preparation">
  
  <!-- PWA Configuration -->
  <meta name="theme-color" content="#4a9d6f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="‰∏≠ÊñáÁªÉ‰π†">
  <meta name="format-detection" content="telephone=no">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="/icon-192.svg">
  
  <title>Chinese Learning Platform - Professional Language Tutoring</title>
  <link rel="stylesheet" href="style.css">
  <script src="auth-client.js"></script>
  <script>
    // Redirect non-authenticated users to welcome page
    if (!AuthService.isAuthenticated()) {
      window.location.href = 'welcome.html';
    }
  </script>
</head>
<body>

  <!-- 
    NAVIGATION BAR
    Responsive navigation with mobile hamburger menu
    Auth state determines displayed links (student vs tutor)
  -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="container">
      <div class="nav-wrapper">
        <!-- Brand Logo -->
        <div class="logo" aria-label="Chinese Learning Platform">‰∏≠ÊñáÁªÉ‰π†</div>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" 
                onclick="toggleMobileMenu()" 
                aria-label="Toggle navigation menu"
                aria-expanded="false"
                aria-controls="mobileMenu">
          <span class="menu-icon">‚ò∞</span>
        </button>
        
        <!-- Navigation Links -->
        <ul class="nav-links" id="mobileMenu" role="menubar">
          <li role="none"><a href="#home" class="nav-link" onclick="closeMobileMenu()" role="menuitem">Home</a></li>
          <li role="none"><a href="quiz-select.html" class="nav-link" role="menuitem">Quizzes</a></li>
          <li role="none"><a href="test-select.html" class="nav-link" role="menuitem">Tests</a></li>
          <li role="none"><a href="flashcard-select.html" class="nav-link" role="menuitem">Flashcards</a></li>
          <li role="none"><a href="progress.html" class="nav-link" role="menuitem">Progress</a></li>
          <li role="none"><a href="resources.html" class="nav-link" role="menuitem">Resources</a></li>
          <li role="none"><a href="writing.html" class="nav-link" role="menuitem">Writing</a></li>
          
          <!-- Tutor-only link (conditionally displayed) -->
          <li id="tutorDashboardLink" style="display: none;" role="none">
            <a href="tutor-dashboard.html" class="nav-link" role="menuitem">Dashboard</a>
          </li>
          
          <!-- Auth Links (dynamic based on login state) -->
          <li id="authLinks" role="none">
            <a href="login.html" class="nav-link" role="menuitem">Login</a>
          </li>
        </ul>
        
        <!-- Dark Mode Toggle -->
        <button id="darkModeToggle" 
                class="dark-mode-toggle" 
                onclick="DarkMode.toggle()" 
                aria-label="Toggle dark mode"
                title="Switch color scheme">
          üåô
        </button>
      </div>
    </div>
  </nav>

  <!-- 
    HERO SECTION
    Clear value proposition for tutor-guided students
  -->
  <section class="hero" id="home" role="banner">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">
          Practice the Chinese your tutor teaches you
        </h1>
        
        <p class="hero-subtitle">
          Reinforce your lessons with quizzes, flashcards, and writing practice designed to help you remember what you're learning.
        </p>
        
        <div class="hero-actions" role="group" aria-label="Get started">
          <a href="quiz-select.html" class="btn btn-primary btn-large">Start Practice</a>
          <a href="progress.html" class="btn btn-secondary btn-large">View Progress</a>
        </div>
      </div>
    </div>
  </section>

  <!-- 
    LEARNING PATH
    Visual progression through Mandarin levels
  -->
  <section class="learning-path" id="levels">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Your Learning Journey</h2>
        <p class="section-subtitle">
          Start at your level and work your way up
        </p>
      </div>
      
      <div class="path-grid">
        <!-- Newbie Level -->
        <article class="level-card level-newbie">
          <div class="level-badge">
            <span class="level-number">1</span>
          </div>
          <h3 class="level-title">Newbie</h3>
          <p class="level-description">
            Basic greetings, numbers, and everyday phrases
          </p>
          <div class="level-stats">
            <span class="stat">87 flashcards</span>
          </div>
          <a href="quiz-select.html?level=newbie" class="level-link">Practice ‚Üí</a>
        </article>

        <!-- Level 1 -->
        <article class="level-card level-beginner">
          <div class="level-badge">
            <span class="level-number">2</span>
          </div>
          <h3 class="level-title">Level 1</h3>
          <p class="level-description">
            Family, time, daily activities, and simple conversations
          </p>
          <div class="level-stats">
            <span class="stat">475 flashcards</span>
            <span class="stat">3 categories</span>
          </div>
          <a href="quiz-select.html?level=level1" class="level-link">Practice ‚Üí</a>
        </article>

        <!-- Level 2 -->
        <article class="level-card level-intermediate">
          <div class="level-badge">
            <span class="level-number">3</span>
          </div>
          <h3 class="level-title">Level 2</h3>
          <p class="level-description">
            More complex sentences and character reading
          </p>
          <div class="level-stats">
            <span class="stat">7 flashcards</span>
          </div>
          <a href="quiz-select.html?level=level2" class="level-link">Practice ‚Üí</a>
        </article>

        <!-- Level 3 -->
        <article class="level-card level-advanced">
          <div class="level-badge">
            <span class="level-number">4</span>
          </div>
          <h3 class="level-title">Level 3</h3>
          <p class="level-description">
            Coming soon - Advanced expressions and idioms
          </p>
          <div class="level-stats">
            <span class="stat-locked">üîí Locked</span>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- 
    PRACTICE TOOLS
    Three main ways to practice
  -->
  <section class="tools-section" id="practice">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Three Ways to Practice</h2>
      </div>
      
      <div class="tools-grid">
        <article class="tool-card">
          <div class="tool-icon">üìù</div>
          <h3>Quizzes</h3>
          <p>Test yourself with multiple choice questions</p>
          <a href="quiz-select.html" class="tool-link">Start Quiz ‚Üí</a>
        </article>
        
        <article class="tool-card">
          <div class="tool-icon">üé¥</div>
          <h3>Flashcards</h3>
          <p>Review vocabulary at your own pace</p>
          <a href="flashcard-select.html" class="tool-link">Browse Cards ‚Üí</a>
        </article>
        
        <article class="tool-card">
          <div class="tool-icon">‚úçÔ∏è</div>
          <h3>Writing</h3>
          <p>Practice character stroke order</p>
          <a href="writing.html" class="tool-link">Start Writing ‚Üí</a>
        </article>
      </div>
    </div>
  </section>

  <!-- 
    FOOTER
  -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="footer-content">
        <p class="footer-text">
          ‰∏≠ÊñáÁªÉ‰π† - Practice companion for Chinese language students
        </p>
        <p class="footer-copyright">
          &copy; 2026 Chinese Learning Platform
        </p>
      </div>
    </div>
  </footer>

  <!-- 
    SCRIPTS
    Load order: Quiz logic ‚Üí Auth ‚Üí Progress API ‚Üí App core
  -->
  <script src="quizzes.js"></script>
  <script src="auth-client.js"></script>
  <script src="progress-api.js"></script>
  <script>
    // ============================================
    // MOBILE NAVIGATION
    // ============================================
    
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      const toggle = document.querySelector('.mobile-menu-toggle');
      const isExpanded = menu.classList.toggle('active');
      toggle.setAttribute('aria-expanded', isExpanded);
    }
    
    function closeMobileMenu() {
      const menu = document.getElementById('mobileMenu');
      const toggle = document.querySelector('.mobile-menu-toggle');
      menu.classList.remove('active');
      toggle.setAttribute('aria-expanded', 'false');
    }
    
    document.addEventListener('click', function(event) {
      const menu = document.getElementById('mobileMenu');
      const toggle = document.querySelector('.mobile-menu-toggle');
      if (menu && !menu.contains(event.target) && !toggle.contains(event.target)) {
        closeMobileMenu();
      }
    });

    // ============================================
    // AUTHENTICATION STATE (for nav only)
    // ============================================
    
    function updateNavigation() {
      const authLinks = document.getElementById('authLinks');
      const tutorLink = document.getElementById('tutorDashboardLink');
      
      if (AuthAPI.isAuthenticated()) {
        const user = AuthAPI.getCurrentUser();
        authLinks.innerHTML = `
          <span class="nav-link" style="color: var(--accent); font-weight: 600;">${user.name}</span> | 
          <a href="#" onclick="AuthAPI.logout(); return false;" class="nav-link">Logout</a>
        `;
        if (user.role === 'tutor' && tutorLink) {
          tutorLink.style.display = 'block';
        }
      } else {
        authLinks.innerHTML = '<a href="login.html" class="nav-link">Login</a> | <a href="signup.html" class="nav-link">Sign Up</a>';
        if (tutorLink) tutorLink.style.display = 'none';
      }
    }

    document.addEventListener('DOMContentLoaded', updateNavigation);
  </script>
  <script src="app.js"></script>
</body>
</html>
